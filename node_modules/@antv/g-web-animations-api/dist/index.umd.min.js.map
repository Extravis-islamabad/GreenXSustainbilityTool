{"version":3,"file":"index.umd.min.js","sources":["../../../node_modules/.pnpm/node_modules/tslib/tslib.es6.js","../src/dom/AnimationEvent.ts","../src/dom/Animation.ts","../src/utils/bezier-easing.ts","../../../node_modules/.pnpm/@antv+util@3.3.4/node_modules/@antv/util/esm/lodash/is-nil.js","../../../node_modules/.pnpm/@antv+util@3.3.4/node_modules/@antv/util/esm/lodash/is-type.js","../../../node_modules/.pnpm/@antv+util@3.3.4/node_modules/@antv/util/esm/lodash/clamp.js","../../../node_modules/.pnpm/@antv+util@3.3.4/node_modules/@antv/util/esm/lodash/is-number.js","../src/utils/custom-easing.ts","../src/utils/animation.ts","../src/utils/interpolation.ts","../src/dom/AnimationEffectTiming.ts","../src/dom/KeyframeList.ts","../src/dom/KeyframeEffect.ts","../src/dom/AnimationTimeline.ts","../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n};\r\n","import { __extends } from \"tslib\";\nimport { FederatedEvent } from '@antv/g-lite';\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nvar AnimationEvent = /** @class */ (function (_super) {\n    __extends(AnimationEvent, _super);\n    function AnimationEvent(manager, target, currentTime, timelineTime) {\n        var _this = _super.call(this, manager) || this;\n        _this.currentTime = currentTime;\n        _this.timelineTime = timelineTime;\n        // @ts-ignore\n        _this.target = target;\n        _this.type = 'finish';\n        _this.bubbles = false;\n        // @ts-ignore\n        _this.currentTarget = target;\n        _this.defaultPrevented = false;\n        _this.eventPhase = _this.AT_TARGET;\n        _this.timeStamp = Date.now();\n        _this.currentTime = currentTime;\n        _this.timelineTime = timelineTime;\n        return _this;\n    }\n    return AnimationEvent;\n}(FederatedEvent));\nexport { AnimationEvent };\n//# sourceMappingURL=AnimationEvent.js.map","import { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nvar sequenceNumber = 0;\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nvar Animation = /** @class */ (function () {\n    function Animation(effect, timeline) {\n        var _a;\n        this.currentTimePending = false;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n         */\n        // playState: AnimationPlayState;\n        this._idle = true;\n        this._paused = false;\n        this._finishedFlag = true;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n         */\n        this._currentTime = 0;\n        this._playbackRate = 1;\n        this._inTimeline = true;\n        this.effect = effect;\n        effect.animation = this;\n        this.timeline = timeline;\n        this.id = \"\".concat(sequenceNumber++);\n        this._inEffect = !!this.effect.update(0);\n        this._totalDuration = Number((_a = this.effect) === null || _a === void 0 ? void 0 : _a.getComputedTiming().endTime);\n        this._holdTime = 0;\n        this._paused = false;\n        this.oldPlayState = 'idle';\n        this.updatePromises();\n    }\n    Object.defineProperty(Animation.prototype, \"pending\", {\n        // animation: InternalAnimation | null;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n         */\n        get: function () {\n            return ((this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n                this.currentTimePending);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"playState\", {\n        get: function () {\n            if (this._idle)\n                return 'idle';\n            if (this._isFinished)\n                return 'finished';\n            if (this._paused)\n                return 'paused';\n            return 'running';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"ready\", {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n         * @example\n          animation.pause();\n          animation.ready.then(function() {\n            // Displays 'running'\n            alert(animation.playState);\n          });\n          animation.play();\n         */\n        get: function () {\n            var _this = this;\n            if (!this.readyPromise) {\n                if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n                    this.timeline.animationsWithPromises.push(this);\n                }\n                this.readyPromise = new Promise(function (resolve, reject) {\n                    _this.resolveReadyPromise = function () {\n                        resolve(_this);\n                    };\n                    _this.rejectReadyPromise = function () {\n                        reject(new Error());\n                    };\n                });\n                if (!this.pending) {\n                    this.resolveReadyPromise();\n                }\n            }\n            return this.readyPromise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"finished\", {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n         * @example\n          Promise.all(\n            elem.getAnimations().map(\n              function(animation) {\n                return animation.finished\n              }\n            )\n          ).then(\n            function() {\n              return elem.remove();\n            }\n          );\n         */\n        get: function () {\n            var _this = this;\n            if (!this.finishedPromise) {\n                if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n                    this.timeline.animationsWithPromises.push(this);\n                }\n                this.finishedPromise = new Promise(function (resolve, reject) {\n                    _this.resolveFinishedPromise = function () {\n                        resolve(_this);\n                    };\n                    _this.rejectFinishedPromise = function () {\n                        reject(new Error());\n                    };\n                });\n                if (this.playState === 'finished') {\n                    this.resolveFinishedPromise();\n                }\n            }\n            return this.finishedPromise;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"currentTime\", {\n        get: function () {\n            this.updatePromises();\n            return this._idle || this.currentTimePending ? null : this._currentTime;\n        },\n        set: function (newTime) {\n            var _a;\n            newTime = Number(newTime);\n            if (isNaN(newTime))\n                return;\n            this.timeline.restart();\n            if (!this._paused && this._startTime !== null) {\n                this._startTime =\n                    Number((_a = this.timeline) === null || _a === void 0 ? void 0 : _a.currentTime) - newTime / this.playbackRate;\n            }\n            this.currentTimePending = false;\n            if (this._currentTime === newTime) {\n                return;\n            }\n            if (this._idle) {\n                this._idle = false;\n                this._paused = true;\n            }\n            this.tickCurrentTime(newTime, true);\n            this.timeline.applyDirtiedAnimation(this);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"startTime\", {\n        get: function () {\n            return this._startTime;\n        },\n        set: function (newTime) {\n            if (newTime !== null) {\n                this.updatePromises();\n                newTime = Number(newTime);\n                if (isNaN(newTime))\n                    return;\n                if (this._paused || this._idle)\n                    return;\n                this._startTime = newTime;\n                this.tickCurrentTime((Number(this.timeline.currentTime) - this._startTime) *\n                    this.playbackRate);\n                this.timeline.applyDirtiedAnimation(this);\n                this.updatePromises();\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"playbackRate\", {\n        get: function () {\n            return this._playbackRate;\n        },\n        set: function (value) {\n            if (value === this._playbackRate) {\n                return;\n            }\n            this.updatePromises();\n            var oldCurrentTime = this.currentTime;\n            this._playbackRate = value;\n            this.startTime = null;\n            if (this.playState !== 'paused' && this.playState !== 'idle') {\n                this._finishedFlag = false;\n                this._idle = false;\n                this.ensureAlive();\n                this.timeline.applyDirtiedAnimation(this);\n            }\n            if (oldCurrentTime !== null) {\n                this.currentTime = oldCurrentTime;\n            }\n            this.updatePromises();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"_isFinished\", {\n        get: function () {\n            return (!this._idle &&\n                ((this._playbackRate > 0 &&\n                    Number(this._currentTime) >= this._totalDuration) ||\n                    (this._playbackRate < 0 && Number(this._currentTime) <= 0)));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"totalDuration\", {\n        get: function () {\n            return this._totalDuration;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Animation.prototype, \"_needsTick\", {\n        get: function () {\n            return this.pending || this.playState === 'running' || !this._finishedFlag;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * state machine,\n     * resolve/reject ready/finished Promise according to current state\n     */\n    Animation.prototype.updatePromises = function () {\n        var oldPlayState = this.oldPlayState;\n        var newPlayState = this.pending ? 'pending' : this.playState;\n        if (this.readyPromise && newPlayState !== oldPlayState) {\n            if (newPlayState === 'idle') {\n                this.rejectReadyPromise();\n                this.readyPromise = undefined;\n            }\n            else if (oldPlayState === 'pending') {\n                this.resolveReadyPromise();\n            }\n            else if (newPlayState === 'pending') {\n                this.readyPromise = undefined;\n            }\n        }\n        if (this.finishedPromise && newPlayState !== oldPlayState) {\n            if (newPlayState === 'idle') {\n                this.rejectFinishedPromise();\n                this.finishedPromise = undefined;\n            }\n            else if (newPlayState === 'finished') {\n                this.resolveFinishedPromise();\n            }\n            else if (oldPlayState === 'finished') {\n                this.finishedPromise = undefined;\n            }\n        }\n        this.oldPlayState = newPlayState;\n        return this.readyPromise || this.finishedPromise;\n    };\n    Animation.prototype.play = function () {\n        this.updatePromises();\n        this._paused = false;\n        if (this._isFinished || this._idle) {\n            this.rewind();\n            this._startTime = null;\n        }\n        this._finishedFlag = false;\n        this._idle = false;\n        this.ensureAlive();\n        this.timeline.applyDirtiedAnimation(this);\n        if (this.timeline.animations.indexOf(this) === -1) {\n            this.timeline.animations.push(this);\n        }\n        this.updatePromises();\n    };\n    Animation.prototype.pause = function () {\n        this.updatePromises();\n        if (this.currentTime) {\n            this._holdTime = this.currentTime;\n        }\n        if (!this._isFinished && !this._paused && !this._idle) {\n            this.currentTimePending = true;\n        }\n        else if (this._idle) {\n            this.rewind();\n            this._idle = false;\n        }\n        this._startTime = null;\n        this._paused = true;\n        this.updatePromises();\n    };\n    Animation.prototype.finish = function () {\n        this.updatePromises();\n        if (this._idle)\n            return;\n        this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n        this._startTime = this._totalDuration - this.currentTime;\n        this.currentTimePending = false;\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n    };\n    Animation.prototype.cancel = function () {\n        var _this = this;\n        this.updatePromises();\n        if (!this._inEffect)\n            return;\n        this._inEffect = false;\n        this._idle = true;\n        this._paused = false;\n        this._finishedFlag = true;\n        this._currentTime = 0;\n        this._startTime = null;\n        this.effect.update(null);\n        // effects are invalid after cancellation as the animation state\n        // needs to un-apply.\n        this.timeline.applyDirtiedAnimation(this);\n        this.updatePromises();\n        /**\n         * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n         * 2. Let current finished promise be a new promise\n         * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n         */\n        // if (this.finishedPromise) {\n        //   this.rejectFinishedPromise();\n        //   this.finishedPromise = undefined;\n        // }\n        if (this.oncancel) {\n            var event_1 = new AnimationEvent(null, this, this.currentTime, null);\n            setTimeout(function () {\n                _this.oncancel(event_1);\n            });\n        }\n    };\n    Animation.prototype.reverse = function () {\n        this.updatePromises();\n        var oldCurrentTime = this.currentTime;\n        this.playbackRate *= -1;\n        this.play();\n        if (oldCurrentTime !== null) {\n            this.currentTime = oldCurrentTime;\n        }\n        this.updatePromises();\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n     */\n    Animation.prototype.updatePlaybackRate = function (playbackRate) {\n        this.playbackRate = playbackRate;\n    };\n    Animation.prototype.targetAnimations = function () {\n        var _a;\n        var target = (_a = this.effect) === null || _a === void 0 ? void 0 : _a.target;\n        return target.getAnimations();\n    };\n    Animation.prototype.markTarget = function () {\n        var animations = this.targetAnimations();\n        if (animations.indexOf(this) === -1) {\n            animations.push(this);\n        }\n    };\n    Animation.prototype.unmarkTarget = function () {\n        var animations = this.targetAnimations();\n        var index = animations.indexOf(this);\n        if (index !== -1) {\n            animations.splice(index, 1);\n        }\n    };\n    Animation.prototype.tick = function (timelineTime, isAnimationFrame) {\n        if (!this._idle && !this._paused) {\n            if (this._startTime === null) {\n                if (isAnimationFrame) {\n                    this.startTime = timelineTime - this._currentTime / this.playbackRate;\n                }\n            }\n            else if (!this._isFinished) {\n                this.tickCurrentTime((timelineTime - this._startTime) * this.playbackRate);\n            }\n        }\n        if (isAnimationFrame) {\n            this.currentTimePending = false;\n            this.fireEvents(timelineTime);\n        }\n    };\n    Animation.prototype.rewind = function () {\n        if (this.playbackRate >= 0) {\n            this.currentTime = 0;\n        }\n        else if (this._totalDuration < Infinity) {\n            this.currentTime = this._totalDuration;\n        }\n        else {\n            throw new Error('Unable to rewind negative playback rate animation with infinite duration');\n        }\n    };\n    Animation.prototype.persist = function () {\n        throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    };\n    Animation.prototype.addEventListener = function (type, listener, options) {\n        throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    };\n    Animation.prototype.removeEventListener = function (type, listener, options) {\n        throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    };\n    Animation.prototype.dispatchEvent = function (event) {\n        throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    };\n    // replaceState: AnimationReplaceState;\n    Animation.prototype.commitStyles = function () {\n        throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n    };\n    Animation.prototype.ensureAlive = function () {\n        var _a, _b;\n        // If an animation is playing backwards and is not fill backwards/both\n        // then it should go out of effect when it reaches the start of its\n        // active interval (currentTime === 0).\n        if (this.playbackRate < 0 && this.currentTime === 0) {\n            this._inEffect = !!((_a = this.effect) === null || _a === void 0 ? void 0 : _a.update(-1));\n        }\n        else {\n            this._inEffect = !!((_b = this.effect) === null || _b === void 0 ? void 0 : _b.update(this.currentTime));\n        }\n        if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n            this._inTimeline = true;\n            this.timeline.animations.push(this);\n        }\n    };\n    Animation.prototype.tickCurrentTime = function (newTime, ignoreLimit) {\n        if (newTime !== this._currentTime) {\n            this._currentTime = newTime;\n            if (this._isFinished && !ignoreLimit) {\n                this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n            }\n            this.ensureAlive();\n        }\n    };\n    Animation.prototype.fireEvents = function (baseTime) {\n        var _this = this;\n        if (this._isFinished) {\n            if (!this._finishedFlag) {\n                if (this.onfinish) {\n                    var event_2 = new AnimationEvent(null, this, this.currentTime, baseTime);\n                    setTimeout(function () {\n                        if (_this.onfinish) {\n                            _this.onfinish(event_2);\n                        }\n                    });\n                }\n                this._finishedFlag = true;\n            }\n        }\n        else {\n            if (this.onframe && this.playState === 'running') {\n                var event_3 = new AnimationEvent(null, this, this.currentTime, baseTime);\n                this.onframe(event_3);\n            }\n            this._finishedFlag = false;\n        }\n    };\n    return Animation;\n}());\nexport { Animation };\n//# sourceMappingURL=Animation.js.map","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport var NEWTON_ITERATIONS = 4;\nexport var NEWTON_MIN_SLOPE = 0.001;\nexport var SUBDIVISION_PRECISION = 0.0000001;\nexport var SUBDIVISION_MAX_ITERATIONS = 10;\nexport var kSplineTableSize = 11;\nexport var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\nexport var float32ArraySupported = typeof Float32Array === 'function';\nexport var A = function (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; };\nexport var B = function (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; };\nexport var C = function (aA1) { return 3.0 * aA1; };\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport var calcBezier = function (aT, aA1, aA2) {\n    return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n};\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport var getSlope = function (aT, aA1, aA2) {\n    return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n};\nexport var binarySubdivide = function (aX, aA, aB, mX1, mX2) {\n    var currentX, currentT, i = 0;\n    do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n        if (currentX > 0.0)\n            aB = currentT;\n        else\n            aA = currentT;\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n    return currentT;\n};\nexport var newtonRaphsonIterate = function (aX, aGuessT, mX1, mX2) {\n    for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0)\n            return aGuessT;\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n    }\n    return aGuessT;\n};\nexport var bezier = function (mX1, mY1, mX2, mY2) {\n    if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1))\n        throw new Error('bezier x values must be in [0, 1] range');\n    if (mX1 === mY1 && mX2 === mY2)\n        return function (t) { return t; };\n    // Precompute samples table\n    var sampleValues = float32ArraySupported\n        ? new Float32Array(kSplineTableSize)\n        : new Array(kSplineTableSize);\n    for (var i = 0; i < kSplineTableSize; ++i) {\n        sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample)\n            intervalStart += kSampleStepSize;\n        --currentSample;\n        // Interpolate to provide an initial guess for t\n        var dist = (aX - sampleValues[currentSample]) /\n            (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE)\n            return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        else if (initialSlope === 0.0)\n            return guessForT;\n        else {\n            return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n        }\n    };\n    return function (t) {\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n        if (t === 0 || t === 1)\n            return t;\n        return calcBezier(getTForX(t), mY1, mY2);\n    };\n};\n//# sourceMappingURL=bezier-easing.js.map","// isFinite,\nvar isNil = function (value) {\n    /**\n     * isNil(null) => true\n     * isNil() => true\n     */\n    return value === null || value === undefined;\n};\nexport default isNil;\n//# sourceMappingURL=is-nil.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","var clamp = function (a, min, max) {\n    if (a < min) {\n        return min;\n    }\n    else if (a > max) {\n        return max;\n    }\n    return a;\n};\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","/**\n * 判断是否数字\n * @return {Boolean} 是否数字\n */\nimport isType from './is-type';\nvar isNumber = function (value) {\n    return isType(value, 'Number');\n};\nexport default isNumber;\n//# sourceMappingURL=is-number.js.map","import { __read } from \"tslib\";\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\nexport var convertToDash = function (str) {\n    str = str.replace(/([A-Z])/g, function (letter) { return \"-\".concat(letter.toLowerCase()); });\n    // Remove first dash\n    return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nvar Quad = function (t) { return Math.pow(t, 2); };\nvar Cubic = function (t) { return Math.pow(t, 3); };\nvar Quart = function (t) { return Math.pow(t, 4); };\nvar Quint = function (t) { return Math.pow(t, 5); };\nvar Expo = function (t) { return Math.pow(t, 6); };\nvar Sine = function (t) { return 1 - Math.cos((t * Math.PI) / 2); };\nvar Circ = function (t) { return 1 - Math.sqrt(1 - t * t); };\nvar Back = function (t) { return t * t * (3 * t - 2); };\nvar Bounce = function (t) {\n    var pow2, b = 4;\n    while (t < ((pow2 = Math.pow(2, --b)) - 1) / 11) { }\n    return 1 / Math.pow(4, 3 - b) - 7.5625 * Math.pow((pow2 * 3 - 2) / 22 - t, 2);\n};\nvar Elastic = function (t, params) {\n    if (params === void 0) { params = []; }\n    var _a = __read(params, 2), _b = _a[0], amplitude = _b === void 0 ? 1 : _b, _c = _a[1], period = _c === void 0 ? 0.5 : _c;\n    var a = clamp(Number(amplitude), 1, 10);\n    var p = clamp(Number(period), 0.1, 2);\n    if (t === 0 || t === 1)\n        return t;\n    return (-a *\n        Math.pow(2, 10 * (t - 1)) *\n        Math.sin(((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p));\n};\nvar Spring = function (t, params, duration) {\n    if (params === void 0) { params = []; }\n    var _a = __read(params, 4), _b = _a[0], mass = _b === void 0 ? 1 : _b, _c = _a[1], stiffness = _c === void 0 ? 100 : _c, _d = _a[2], damping = _d === void 0 ? 10 : _d, _e = _a[3], velocity = _e === void 0 ? 0 : _e;\n    mass = clamp(mass, 0.1, 1000);\n    stiffness = clamp(stiffness, 0.1, 1000);\n    damping = clamp(damping, 0.1, 1000);\n    velocity = clamp(velocity, 0.1, 1000);\n    var w0 = Math.sqrt(stiffness / mass);\n    var zeta = damping / (2 * Math.sqrt(stiffness * mass));\n    var wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n    var a = 1;\n    var b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n    var progress = duration ? (duration * t) / 1000 : t;\n    if (zeta < 1) {\n        progress =\n            Math.exp(-progress * zeta * w0) * (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n    }\n    else {\n        progress = (a + b * progress) * Math.exp(-progress * w0);\n    }\n    if (t === 0 || t === 1)\n        return t;\n    return 1 - progress;\n};\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nvar Steps = function (t, params) {\n    if (params === void 0) { params = []; }\n    var _a = __read(params, 2), _b = _a[0], steps = _b === void 0 ? 10 : _b, type = _a[1];\n    var trunc = type == 'start' ? Math.ceil : Math.floor;\n    return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n// @ts-ignore\nvar Bezier = function (t, params) {\n    if (params === void 0) { params = []; }\n    var _a = __read(params, 4), mX1 = _a[0], mY1 = _a[1], mX2 = _a[2], mY2 = _a[3];\n    return bezier(mX1, mY1, mX2, mY2)(t);\n};\n/** The default `ease-in` easing function */\nvar easein = bezier(0.42, 0.0, 1.0, 1.0);\n/** Converts easing functions to their `out`counter parts */\nvar EaseOut = function (ease) {\n    return function (t, params, duration) {\n        if (params === void 0) { params = []; }\n        return 1 - ease(1 - t, params, duration);\n    };\n};\n/** Converts easing functions to their `in-out` counter parts */\nvar EaseInOut = function (ease) {\n    return function (t, params, duration) {\n        if (params === void 0) { params = []; }\n        return t < 0.5 ? ease(t * 2, params, duration) / 2 : 1 - ease(t * -2 + 2, params, duration) / 2;\n    };\n};\n/** Converts easing functions to their `out-in` counter parts */\nvar EaseOutIn = function (ease) {\n    return function (t, params, duration) {\n        if (params === void 0) { params = []; }\n        return t < 0.5\n            ? (1 - ease(1 - t * 2, params, duration)) / 2\n            : (ease(t * 2 - 1, params, duration) + 1) / 2;\n    };\n};\nexport var EasingFunctions = {\n    steps: Steps,\n    'step-start': function (t) { return Steps(t, [1, 'start']); },\n    'step-end': function (t) { return Steps(t, [1, 'end']); },\n    linear: function (t) { return t; },\n    'cubic-bezier': Bezier,\n    ease: function (t) { return Bezier(t, [0.25, 0.1, 0.25, 1.0]); },\n    in: easein,\n    out: EaseOut(easein),\n    'in-out': EaseInOut(easein),\n    'out-in': EaseOutIn(easein),\n    'in-quad': Quad,\n    'out-quad': EaseOut(Quad),\n    'in-out-quad': EaseInOut(Quad),\n    'out-in-quad': EaseOutIn(Quad),\n    'in-cubic': Cubic,\n    'out-cubic': EaseOut(Cubic),\n    'in-out-cubic': EaseInOut(Cubic),\n    'out-in-cubic': EaseOutIn(Cubic),\n    'in-quart': Quart,\n    'out-quart': EaseOut(Quart),\n    'in-out-quart': EaseInOut(Quart),\n    'out-in-quart': EaseOutIn(Quart),\n    'in-quint': Quint,\n    'out-quint': EaseOut(Quint),\n    'in-out-quint': EaseInOut(Quint),\n    'out-in-quint': EaseOutIn(Quint),\n    'in-expo': Expo,\n    'out-expo': EaseOut(Expo),\n    'in-out-expo': EaseInOut(Expo),\n    'out-in-expo': EaseOutIn(Expo),\n    'in-sine': Sine,\n    'out-sine': EaseOut(Sine),\n    'in-out-sine': EaseInOut(Sine),\n    'out-in-sine': EaseOutIn(Sine),\n    'in-circ': Circ,\n    'out-circ': EaseOut(Circ),\n    'in-out-circ': EaseInOut(Circ),\n    'out-in-circ': EaseOutIn(Circ),\n    'in-back': Back,\n    'out-back': EaseOut(Back),\n    'in-out-back': EaseInOut(Back),\n    'out-in-back': EaseOutIn(Back),\n    'in-bounce': Bounce,\n    'out-bounce': EaseOut(Bounce),\n    'in-out-bounce': EaseInOut(Bounce),\n    'out-in-bounce': EaseOutIn(Bounce),\n    'in-elastic': Elastic,\n    'out-elastic': EaseOut(Elastic),\n    'in-out-elastic': EaseInOut(Elastic),\n    'out-in-elastic': EaseOutIn(Elastic),\n    spring: Spring,\n    'spring-in': Spring,\n    'spring-out': EaseOut(Spring),\n    'spring-in-out': EaseInOut(Spring),\n    'spring-out-in': EaseOutIn(Spring),\n};\n/**\n * Convert string easing to their proper form\n */\nvar complexEasingSyntax = function (ease) {\n    return convertToDash(ease)\n        .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n        .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n        .toLowerCase()\n        .trim();\n};\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport var getEasingFunction = function (ease) {\n    return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n//# sourceMappingURL=custom-easing.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\nexport var linear = function (x) {\n    return x;\n};\nvar Start = 1;\nvar Middle = 0.5;\nvar End = 0;\nfunction step(count, pos) {\n    return function (x) {\n        if (x >= 1) {\n            return 1;\n        }\n        var stepSize = 1 / count;\n        x += pos * stepSize;\n        return x - (x % stepSize);\n    };\n}\nvar numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nvar cubicBezierRe = new RegExp('cubic-bezier\\\\(' +\n    numberString +\n    ',' +\n    numberString +\n    ',' +\n    numberString +\n    ',' +\n    numberString +\n    '\\\\)');\nvar step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nvar step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\nexport function parseEasingFunction(normalizedEasing) {\n    var cubicData = cubicBezierRe.exec(normalizedEasing);\n    if (cubicData) {\n        // @ts-ignore\n        return bezier.apply(void 0, __spreadArray([], __read(cubicData.slice(1).map(Number)), false));\n    }\n    var step1Data = step1Re.exec(normalizedEasing);\n    if (step1Data) {\n        return step(Number(step1Data[1]), End);\n    }\n    var step2Data = step2Re.exec(normalizedEasing);\n    if (step2Data) {\n        // @ts-ignore\n        return step(Number(step2Data[1]), { start: Start, middle: Middle, end: End }[step2Data[2]]);\n    }\n    return getEasingFunction(normalizedEasing);\n}\nexport function calculateActiveDuration(timing) {\n    // @ts-ignore\n    return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\nfunction repeatedDuration(timing) {\n    var _a;\n    // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n    if (timing.duration === 0 || timing.iterations === 0) {\n        return 0;\n    }\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n    // if (timing.duration === 'auto') {\n    //   timing.duration = 0;\n    // }\n    return (timing.duration === 'auto' ? 0 : Number(timing.duration)) * ((_a = timing.iterations) !== null && _a !== void 0 ? _a : 1);\n}\nvar PhaseNone = 0;\nvar PhaseBefore = 1;\nvar PhaseAfter = 2;\nvar PhaseActive = 3;\nfunction calculatePhase(activeDuration, localTime, timing) {\n    // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n    if (localTime === null) {\n        return PhaseNone;\n    }\n    var endTime = timing.endTime;\n    if (localTime < Math.min(timing.delay, endTime)) {\n        return PhaseBefore;\n    }\n    if (localTime >= Math.min(timing.delay + activeDuration + timing.endDelay, endTime)) {\n        return PhaseAfter;\n    }\n    return PhaseActive;\n}\nfunction calculateActiveTime(activeDuration, fillMode, localTime, phase, delay) {\n    // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n    switch (phase) {\n        case PhaseBefore:\n            if (fillMode === 'backwards' || fillMode === 'both')\n                return 0;\n            return null;\n        case PhaseActive:\n            return localTime - delay;\n        case PhaseAfter:\n            if (fillMode === 'forwards' || fillMode === 'both')\n                return activeDuration;\n            return null;\n        case PhaseNone:\n            return null;\n    }\n}\nfunction calculateOverallProgress(iterationDuration, phase, iterations, activeTime, iterationStart) {\n    // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n    var overallProgress = iterationStart;\n    if (iterationDuration === 0) {\n        if (phase !== PhaseBefore) {\n            overallProgress += iterations;\n        }\n    }\n    else {\n        overallProgress += activeTime / iterationDuration;\n    }\n    return overallProgress;\n}\nfunction calculateSimpleIterationProgress(overallProgress, iterationStart, phase, iterations, activeTime, iterationDuration) {\n    // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n    var simpleIterationProgress = overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n    if (simpleIterationProgress === 0 &&\n        phase === PhaseAfter &&\n        iterations !== 0 &&\n        (activeTime !== 0 || iterationDuration === 0)) {\n        simpleIterationProgress = 1;\n    }\n    return simpleIterationProgress;\n}\nfunction calculateCurrentIteration(phase, iterations, simpleIterationProgress, overallProgress) {\n    // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n    if (phase === PhaseAfter && iterations === Infinity) {\n        return Infinity;\n    }\n    if (simpleIterationProgress === 1) {\n        return Math.floor(overallProgress) - 1;\n    }\n    return Math.floor(overallProgress);\n}\nfunction calculateDirectedProgress(playbackDirection, currentIteration, simpleIterationProgress) {\n    // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n    var currentDirection = playbackDirection;\n    if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n        var d = currentIteration;\n        if (playbackDirection === 'alternate-reverse') {\n            d += 1;\n        }\n        currentDirection = 'normal';\n        if (d !== Infinity && d % 2 !== 0) {\n            currentDirection = 'reverse';\n        }\n    }\n    if (currentDirection === 'normal') {\n        return simpleIterationProgress;\n    }\n    return 1 - simpleIterationProgress;\n}\nexport function calculateIterationProgress(activeDuration, localTime, timing) {\n    var phase = calculatePhase(activeDuration, localTime, timing);\n    var activeTime = calculateActiveTime(activeDuration, timing.fill, localTime, phase, timing.delay);\n    if (activeTime === null)\n        return null;\n    var duration = timing.duration === 'auto' ? 0 : timing.duration;\n    var overallProgress = calculateOverallProgress(duration, phase, timing.iterations, activeTime, timing.iterationStart);\n    var simpleIterationProgress = calculateSimpleIterationProgress(overallProgress, timing.iterationStart, phase, timing.iterations, activeTime, duration);\n    var currentIteration = calculateCurrentIteration(phase, timing.iterations, simpleIterationProgress, overallProgress);\n    var directedProgress = calculateDirectedProgress(timing.direction, currentIteration, simpleIterationProgress);\n    timing.currentIteration = currentIteration;\n    timing.progress = directedProgress;\n    // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n    // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n    return timing.easingFunction(directedProgress);\n}\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport var EASINGS = {\n    in: 'ease-in',\n    out: 'ease-out',\n    'in-out': 'ease-in-out',\n    // Sine\n    'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n    'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n    'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n    // Quad\n    'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n    'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n    'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n    // Cubic\n    'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n    'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n    'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n    // Quart\n    'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n    'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n    'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n    // Quint\n    'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n    'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n    'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n    // Expo\n    'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n    'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n    'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n    // Circ\n    'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n    'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n    'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n    // Back\n    'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n    'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n    'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport var EasingKeys = Object.keys(EASINGS);\n/**\n * Converts users input into a usable easing function string\n */\nexport var getEase = function (ease) {\n    if (ease === void 0) { ease = 'ease'; }\n    // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n    var search = convertToDash(ease).replace(/^ease-/, '');\n    return EASINGS[search] || ease;\n};\n//# sourceMappingURL=animation.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\nexport function convertEffectInput(keyframes, timing, target) {\n    var propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(keyframes, timing);\n    var interpolations = makeInterpolations(propertySpecificKeyframeGroups, target);\n    return function (target, fraction) {\n        if (fraction !== null) {\n            interpolations\n                .filter(function (interpolation) {\n                return (fraction >= interpolation.applyFrom &&\n                    fraction < interpolation.applyTo);\n            })\n                .forEach(function (interpolation) {\n                var offsetFraction = fraction - interpolation.startOffset;\n                var localDuration = interpolation.endOffset - interpolation.startOffset;\n                var scaledLocalTime = localDuration === 0\n                    ? 0\n                    : interpolation.easingFunction(offsetFraction / localDuration);\n                // apply updated attribute\n                target.setAttribute(interpolation.property, interpolation.interpolation(scaledLocalTime));\n                // if (interpolation.property === 'visibility') {\n                //   console.log(\n                //     scaledLocalTime,\n                //     interpolation.interpolation(scaledLocalTime),\n                //   );\n                // }\n            });\n        }\n        else {\n            for (var property in propertySpecificKeyframeGroups)\n                if (isNotReservedWord(property)) {\n                    // clear attribute\n                    target.setAttribute(property, null);\n                }\n        }\n    };\n}\nfunction isNotReservedWord(member) {\n    return (member !== 'offset' &&\n        member !== 'easing' &&\n        member !== 'composite' &&\n        member !== 'computedOffset');\n}\nfunction makePropertySpecificKeyframeGroups(keyframes, timing) {\n    var propertySpecificKeyframeGroups = {};\n    for (var i = 0; i < keyframes.length; i++) {\n        for (var member in keyframes[i]) {\n            if (isNotReservedWord(member)) {\n                var propertySpecificKeyframe = {\n                    offset: keyframes[i].offset,\n                    computedOffset: keyframes[i].computedOffset,\n                    easing: keyframes[i].easing,\n                    easingFunction: parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n                    value: keyframes[i][member],\n                };\n                propertySpecificKeyframeGroups[member] =\n                    propertySpecificKeyframeGroups[member] || [];\n                propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n            }\n        }\n    }\n    return propertySpecificKeyframeGroups;\n}\nfunction makeInterpolations(propertySpecificKeyframeGroups, target) {\n    var interpolations = [];\n    for (var groupName in propertySpecificKeyframeGroups) {\n        var keyframes = propertySpecificKeyframeGroups[groupName];\n        for (var i = 0; i < keyframes.length - 1; i++) {\n            var startIndex = i;\n            var endIndex = i + 1;\n            var startOffset = keyframes[startIndex].computedOffset;\n            var endOffset = keyframes[endIndex].computedOffset;\n            var applyFrom = startOffset;\n            var applyTo = endOffset;\n            if (i === 0) {\n                applyFrom = -Infinity;\n                if (endOffset === 0) {\n                    endIndex = startIndex;\n                }\n            }\n            if (i === keyframes.length - 2) {\n                applyTo = Infinity;\n                if (startOffset === 1) {\n                    startIndex = endIndex;\n                }\n            }\n            interpolations.push({\n                applyFrom: applyFrom,\n                applyTo: applyTo,\n                startOffset: keyframes[startIndex].computedOffset,\n                endOffset: keyframes[endIndex].computedOffset,\n                easingFunction: keyframes[startIndex].easingFunction,\n                property: groupName,\n                interpolation: propertyInterpolation(groupName, keyframes[startIndex].value, keyframes[endIndex].value, target),\n            });\n        }\n    }\n    interpolations.sort(function (leftInterpolation, rightInterpolation) {\n        return leftInterpolation.startOffset - rightInterpolation.startOffset;\n    });\n    return interpolations;\n}\nvar InterpolationFactory = function (from, to, \n// eslint-disable-next-line @typescript-eslint/ban-types\nconvertToString) {\n    return function (f) {\n        var interpolated = interpolate(from, to, f);\n        return !runtime.enableCSSParsing && isNumber(interpolated)\n            ? interpolated\n            : convertToString(interpolated);\n    };\n};\nfunction propertyInterpolation(property, left, right, target) {\n    var metadata = propertyMetadataCache[property];\n    // discrete step\n    // if (property === 'visibility') {\n    //   return function (t: number) {\n    //     if (t === 0) return left;\n    //     if (t === 1) return right;\n    //     debugger;\n    //     return t < 0.5 ? left : right;\n    //   };\n    // }\n    if (metadata && metadata.syntax && metadata.int) {\n        var propertyHandler = runtime.styleValueRegistry.getPropertySyntax(metadata.syntax);\n        if (propertyHandler) {\n            var usedLeft = void 0;\n            var usedRight = void 0;\n            if (runtime.enableCSSParsing) {\n                var computedLeft = runtime.styleValueRegistry.parseProperty(property, left, target);\n                var computedRight = runtime.styleValueRegistry.parseProperty(property, right, target);\n                usedLeft = runtime.styleValueRegistry.computeProperty(property, computedLeft, target);\n                usedRight = runtime.styleValueRegistry.computeProperty(property, computedRight, target);\n            }\n            else {\n                var parser = propertyHandler.parserWithCSSDisabled;\n                usedLeft = parser ? parser(left, target) : left;\n                usedRight = parser ? parser(right, target) : right;\n            }\n            // merger [left, right, n2string()]\n            var interpolationArgs = propertyHandler.mixer(usedLeft, usedRight, target);\n            if (interpolationArgs) {\n                var interp_1 = InterpolationFactory.apply(void 0, __spreadArray([], __read(interpolationArgs), false));\n                return function (t) {\n                    if (t === 0)\n                        return left;\n                    if (t === 1)\n                        return right;\n                    return interp_1(t);\n                };\n            }\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    return InterpolationFactory(false, true, function (bool) {\n        return bool ? right : left;\n    });\n}\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(from, to, f) {\n    if (typeof from === 'number' && typeof to === 'number') {\n        return from * (1 - f) + to * f;\n    }\n    if ((typeof from === 'boolean' && typeof to === 'boolean') ||\n        (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n    ) {\n        return f < 0.5 ? from : to;\n    }\n    if (Array.isArray(from) && Array.isArray(to)) {\n        // interpolate arrays/matrix\n        var fromLength = from.length;\n        var toLength = to.length;\n        var length_1 = Math.max(fromLength, toLength);\n        var r = [];\n        for (var i = 0; i < length_1; i++) {\n            r.push(interpolate(from[i < fromLength ? i : fromLength - 1], to[i < toLength ? i : toLength - 1], f));\n        }\n        return r;\n    }\n    throw new Error('Mismatched interpolation arguments ' + from + ':' + to);\n}\n//# sourceMappingURL=interpolation.js.map","import { linear, parseEasingFunction } from '../utils/animation';\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nvar AnimationEffectTiming = /** @class */ (function () {\n    function AnimationEffectTiming() {\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n         */\n        this.delay = 0;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n         */\n        this.direction = 'normal';\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n         */\n        this.duration = 'auto';\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n         */\n        this._easing = 'linear';\n        this.easingFunction = linear;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n         */\n        this.endDelay = 0;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n         */\n        this.fill = 'auto';\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n         */\n        this.iterationStart = 0;\n        /**\n         * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n         */\n        this.iterations = 1;\n        this.currentIteration = null;\n        this.progress = null;\n    }\n    Object.defineProperty(AnimationEffectTiming.prototype, \"easing\", {\n        get: function () {\n            return this._easing;\n        },\n        set: function (value) {\n            this.easingFunction = parseEasingFunction(value);\n            this._easing = value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return AnimationEffectTiming;\n}());\nexport { AnimationEffectTiming };\n//# sourceMappingURL=AnimationEffectTiming.js.map","import { isNil } from '@antv/util';\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput) {\n    var normalizedEffectInput = [];\n    for (var property in effectInput) {\n        // skip reserved props\n        if (property in ['easing', 'offset', 'composite']) {\n            continue;\n        }\n        // @ts-ignore\n        var values = effectInput[property];\n        if (!Array.isArray(values)) {\n            values = [values];\n        }\n        var numKeyframes = values.length;\n        for (var i = 0; i < numKeyframes; i++) {\n            if (!normalizedEffectInput[i]) {\n                var keyframe = {};\n                if ('offset' in effectInput) {\n                    keyframe.offset = Number(effectInput.offset);\n                }\n                if ('easing' in effectInput) {\n                    // @ts-ignore\n                    keyframe.easing = effectInput.easing;\n                }\n                if ('composite' in effectInput) {\n                    // @ts-ignore\n                    keyframe.composite = effectInput.composite;\n                }\n                normalizedEffectInput[i] = keyframe;\n            }\n            if (values[i] !== undefined && values[i] !== null) {\n                normalizedEffectInput[i][property] = values[i];\n            }\n        }\n    }\n    normalizedEffectInput.sort(function (a, b) {\n        return (a.computedOffset || 0) - (b.computedOffset || 0);\n    });\n    return normalizedEffectInput;\n}\nexport function normalizeKeyframes(effectInput, timing) {\n    if (effectInput === null) {\n        return [];\n    }\n    if (!Array.isArray(effectInput)) {\n        effectInput = convertToArrayForm(effectInput);\n    }\n    var keyframes = effectInput.map(function (originalKeyframe) {\n        var keyframe = {};\n        if (timing === null || timing === void 0 ? void 0 : timing.composite) {\n            // This will be auto if the composite operation specified on the effect is being used.\n            // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n            keyframe.composite = 'auto';\n        }\n        for (var member in originalKeyframe) {\n            var memberValue = originalKeyframe[member];\n            if (member === 'offset') {\n                if (memberValue !== null) {\n                    memberValue = Number(memberValue);\n                    if (!isFinite(memberValue))\n                        throw new Error('Keyframe offsets must be numbers.');\n                    if (memberValue < 0 || memberValue > 1)\n                        throw new Error('Keyframe offsets must be between 0 and 1.');\n                    keyframe.computedOffset = memberValue;\n                }\n            }\n            else if (member === 'composite') {\n                // TODO: Support add & accumulate in KeyframeEffect.composite\n                // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n                if (['replace', 'add', 'accumulate', 'auto'].indexOf(memberValue) === -1) {\n                    throw new Error(\"\".concat(memberValue, \" compositing is not supported\"));\n                }\n            }\n            else if (member === 'easing') {\n                // TODO: Validate animation-timing-function\n                // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n                // memberValue = memberValue;\n                // } else {\n                //   memberValue = '' + memberValue;\n            }\n            // assign to keyframe, no need to parse shorthand value\n            keyframe[member] = memberValue;\n        }\n        if (keyframe.offset === undefined) {\n            keyframe.offset = null;\n        }\n        if (keyframe.easing === undefined) {\n            // override with timing.easing\n            keyframe.easing = (timing === null || timing === void 0 ? void 0 : timing.easing) || 'linear';\n        }\n        if (keyframe.composite === undefined) {\n            keyframe.composite = 'auto';\n        }\n        return keyframe;\n    });\n    var everyFrameHasOffset = true;\n    var previousOffset = -Infinity;\n    for (var i = 0; i < keyframes.length; i++) {\n        var offset = keyframes[i].offset;\n        if (!isNil(offset)) {\n            if (offset < previousOffset) {\n                throw new TypeError('Keyframes are not loosely sorted by offset. Sort or specify offsets.');\n            }\n            previousOffset = offset;\n        }\n        else {\n            everyFrameHasOffset = false;\n        }\n    }\n    keyframes = keyframes.filter(function (keyframe) {\n        return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n    });\n    function spaceKeyframes() {\n        var _a, _b;\n        var length = keyframes.length;\n        keyframes[length - 1].computedOffset = Number((_a = keyframes[length - 1].offset) !== null && _a !== void 0 ? _a : 1);\n        if (length > 1) {\n            keyframes[0].computedOffset = Number((_b = keyframes[0].offset) !== null && _b !== void 0 ? _b : 0);\n        }\n        var previousIndex = 0;\n        var previousOffset = Number(keyframes[0].computedOffset);\n        for (var i = 1; i < length; i++) {\n            var offset = keyframes[i].computedOffset;\n            if (!isNil(offset) && !isNil(previousOffset)) {\n                for (var j = 1; j < i - previousIndex; j++)\n                    keyframes[previousIndex + j].computedOffset =\n                        previousOffset + ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n                previousIndex = i;\n                previousOffset = Number(offset);\n            }\n        }\n    }\n    if (!everyFrameHasOffset)\n        spaceKeyframes();\n    return keyframes;\n}\n//# sourceMappingURL=KeyframeList.js.map","import { runtime } from '@antv/g-lite';\nimport { calculateActiveDuration, calculateIterationProgress, convertEffectInput, } from '../utils';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\nvar fills = 'backwards|forwards|both|none'.split('|');\nvar directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(timingInput, forGroup) {\n    var timing = new AnimationEffectTiming();\n    if (forGroup) {\n        timing.fill = 'both';\n        timing.duration = 'auto';\n    }\n    if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n        timing.duration = timingInput;\n    }\n    else if (timingInput !== undefined) {\n        Object.keys(timingInput).forEach(function (property) {\n            if (timingInput[property] !== undefined &&\n                timingInput[property] !== null &&\n                timingInput[property] !== 'auto') {\n                if (typeof timing[property] === 'number' || property === 'duration') {\n                    if (typeof timingInput[property] !== 'number' ||\n                        isNaN(timingInput[property])) {\n                        return;\n                    }\n                }\n                if (property === 'fill' &&\n                    fills.indexOf(timingInput[property]) === -1) {\n                    return;\n                }\n                if (property === 'direction' &&\n                    directions.indexOf(timingInput[property]) === -1) {\n                    return;\n                }\n                // @ts-ignore\n                timing[property] = timingInput[property];\n            }\n        });\n    }\n    return timing;\n}\nexport function normalizeTimingInput(timingInput, forGroup) {\n    timingInput = numericTimingToObject(timingInput !== null && timingInput !== void 0 ? timingInput : { duration: 'auto' });\n    return makeTiming(timingInput, forGroup);\n}\nexport function numericTimingToObject(timingInput) {\n    if (typeof timingInput === 'number') {\n        if (isNaN(timingInput)) {\n            timingInput = { duration: 'auto' };\n        }\n        else {\n            timingInput = { duration: timingInput };\n        }\n    }\n    return timingInput;\n}\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nvar KeyframeEffect = /** @class */ (function () {\n    function KeyframeEffect(target, effectInput, timingInput) {\n        var _this = this;\n        this.composite = 'replace';\n        this.iterationComposite = 'replace';\n        this.target = target;\n        this.timing = normalizeTimingInput(timingInput, false);\n        this.timing.effect = this;\n        this.timing.activeDuration = calculateActiveDuration(this.timing);\n        this.timing.endTime = Math.max(0, this.timing.delay + this.timing.activeDuration + this.timing.endDelay);\n        this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n        this.interpolations = convertEffectInput(this.normalizedKeyframes, this.timing, this.target);\n        // 不支持 proxy 时降级成 this.timing\n        var Proxy = runtime.globalThis.Proxy;\n        this.computedTiming = Proxy\n            ? new Proxy(this.timing, {\n                get: function (target, prop) {\n                    if (prop === 'duration') {\n                        return target.duration === 'auto' ? 0 : target.duration;\n                    }\n                    else if (prop === 'fill') {\n                        return target.fill === 'auto' ? 'none' : target.fill;\n                    }\n                    else if (prop === 'localTime') {\n                        return (_this.animation && _this.animation.currentTime) || null;\n                    }\n                    else if (prop === 'currentIteration') {\n                        if (!_this.animation || _this.animation.playState !== 'running') {\n                            return null;\n                        }\n                        return target.currentIteration || 0;\n                    }\n                    else if (prop === 'progress') {\n                        if (!_this.animation || _this.animation.playState !== 'running') {\n                            return null;\n                        }\n                        return target.progress || 0;\n                    }\n                    return target[prop];\n                },\n                set: function () {\n                    return true;\n                },\n            })\n            : this.timing;\n    }\n    KeyframeEffect.prototype.applyInterpolations = function () {\n        this.interpolations(this.target, Number(this.timeFraction));\n    };\n    KeyframeEffect.prototype.update = function (localTime) {\n        if (localTime === null) {\n            return false;\n        }\n        this.timeFraction = calculateIterationProgress(this.timing.activeDuration, localTime, this.timing);\n        return this.timeFraction !== null;\n    };\n    KeyframeEffect.prototype.getKeyframes = function () {\n        return this.normalizedKeyframes;\n    };\n    KeyframeEffect.prototype.setKeyframes = function (keyframes) {\n        this.normalizedKeyframes = normalizeKeyframes(keyframes);\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n     */\n    KeyframeEffect.prototype.getComputedTiming = function () {\n        return this.computedTiming;\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n     */\n    KeyframeEffect.prototype.getTiming = function () {\n        return this.timing;\n    };\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n     */\n    KeyframeEffect.prototype.updateTiming = function (timing) {\n        var _this = this;\n        Object.keys(timing || {}).forEach(function (name) {\n            _this.timing[name] = timing[name];\n        });\n    };\n    return KeyframeEffect;\n}());\nexport { KeyframeEffect };\n//# sourceMappingURL=KeyframeEffect.js.map","import { __read, __spreadArray } from \"tslib\";\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\nexport function compareAnimations(leftAnimation, rightAnimation) {\n    return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nvar AnimationTimeline = /** @class */ (function () {\n    function AnimationTimeline(document) {\n        var _this = this;\n        this.document = document;\n        /**\n         * all active animations\n         */\n        this.animations = [];\n        this.ticking = false;\n        this.timelineTicking = false;\n        this.hasRestartedThisFrame = false;\n        this.animationsWithPromises = [];\n        this.inTick = false;\n        this.pendingEffects = [];\n        this.currentTime = null;\n        this.rafId = 0;\n        this.rafCallbacks = [];\n        this.webAnimationsNextTick = function (t) {\n            _this.currentTime = t;\n            _this.discardAnimations();\n            if (_this.animations.length === 0) {\n                _this.timelineTicking = false;\n            }\n            else {\n                _this.requestAnimationFrame(_this.webAnimationsNextTick);\n            }\n        };\n        this.processRafCallbacks = function (t) {\n            var processing = _this.rafCallbacks;\n            _this.rafCallbacks = [];\n            if (t < Number(_this.currentTime))\n                t = Number(_this.currentTime);\n            _this.animations.sort(compareAnimations);\n            _this.animations = _this.tick(t, true, _this.animations)[0];\n            processing.forEach(function (entry) {\n                entry[1](t);\n            });\n            _this.applyPendingEffects();\n        };\n    }\n    AnimationTimeline.prototype.getAnimations = function () {\n        this.discardAnimations();\n        return this.animations.slice();\n    };\n    AnimationTimeline.prototype.isTicking = function () {\n        return this.inTick;\n    };\n    AnimationTimeline.prototype.play = function (target, keyframes, options) {\n        var effect = new KeyframeEffect(target, keyframes, options);\n        var animation = new Animation(effect, this);\n        this.animations.push(animation);\n        this.restartWebAnimationsNextTick();\n        animation.updatePromises();\n        animation.play();\n        animation.updatePromises();\n        return animation;\n    };\n    // RAF is supposed to be the last script to occur before frame rendering but not\n    // all browsers behave like this. This function is for synchonously updating an\n    // animation's effects whenever its state is mutated by script to work around\n    // incorrect script execution ordering by the browser.\n    AnimationTimeline.prototype.applyDirtiedAnimation = function (animation) {\n        var _this = this;\n        if (this.inTick) {\n            return;\n        }\n        // update active animations in displayobject\n        animation.markTarget();\n        var animations = animation.targetAnimations();\n        animations.sort(compareAnimations);\n        // clear inactive animations\n        var inactiveAnimations = this.tick(Number(this.currentTime), false, animations.slice())[1];\n        inactiveAnimations.forEach(function (animation) {\n            var index = _this.animations.indexOf(animation);\n            if (index !== -1) {\n                _this.animations.splice(index, 1);\n            }\n        });\n        this.applyPendingEffects();\n    };\n    AnimationTimeline.prototype.restart = function () {\n        if (!this.ticking) {\n            this.ticking = true;\n            this.requestAnimationFrame(function () { });\n            this.hasRestartedThisFrame = true;\n        }\n        return this.hasRestartedThisFrame;\n    };\n    AnimationTimeline.prototype.destroy = function () {\n        this.document.defaultView.cancelAnimationFrame(this.frameId);\n    };\n    AnimationTimeline.prototype.applyPendingEffects = function () {\n        this.pendingEffects.forEach(function (effect) {\n            effect === null || effect === void 0 ? void 0 : effect.applyInterpolations();\n        });\n        this.pendingEffects = [];\n    };\n    AnimationTimeline.prototype.updateAnimationsPromises = function () {\n        this.animationsWithPromises = this.animationsWithPromises.filter(function (animation) {\n            return animation.updatePromises();\n        });\n    };\n    AnimationTimeline.prototype.discardAnimations = function () {\n        this.updateAnimationsPromises();\n        this.animations = this.animations.filter(function (animation) {\n            return animation.playState !== 'finished' && animation.playState !== 'idle';\n        });\n    };\n    AnimationTimeline.prototype.restartWebAnimationsNextTick = function () {\n        if (!this.timelineTicking) {\n            this.timelineTicking = true;\n            this.requestAnimationFrame(this.webAnimationsNextTick);\n        }\n    };\n    AnimationTimeline.prototype.rAF = function (f) {\n        var id = this.rafId++;\n        if (this.rafCallbacks.length === 0) {\n            this.frameId = this.document.defaultView.requestAnimationFrame(this.processRafCallbacks);\n        }\n        this.rafCallbacks.push([id, f]);\n        return id;\n    };\n    AnimationTimeline.prototype.requestAnimationFrame = function (f) {\n        var _this = this;\n        return this.rAF(function (x) {\n            _this.updateAnimationsPromises();\n            f(x);\n            _this.updateAnimationsPromises();\n        });\n    };\n    AnimationTimeline.prototype.tick = function (t, isAnimationFrame, updatingAnimations) {\n        var _a, _b;\n        var _this = this;\n        this.inTick = true;\n        this.hasRestartedThisFrame = false;\n        this.currentTime = t;\n        this.ticking = false;\n        var newPendingClears = [];\n        var newPendingEffects = [];\n        var activeAnimations = [];\n        var inactiveAnimations = [];\n        updatingAnimations.forEach(function (animation) {\n            animation.tick(t, isAnimationFrame);\n            if (!animation._inEffect) {\n                newPendingClears.push(animation.effect);\n                animation.unmarkTarget();\n            }\n            else {\n                newPendingEffects.push(animation.effect);\n                animation.markTarget();\n            }\n            if (animation._needsTick)\n                _this.ticking = true;\n            var alive = animation._inEffect || animation._needsTick;\n            animation._inTimeline = alive;\n            if (alive) {\n                activeAnimations.push(animation);\n            }\n            else {\n                inactiveAnimations.push(animation);\n            }\n        });\n        (_a = this.pendingEffects).push.apply(_a, __spreadArray([], __read(newPendingClears), false));\n        (_b = this.pendingEffects).push.apply(_b, __spreadArray([], __read(newPendingEffects), false));\n        if (this.ticking)\n            this.requestAnimationFrame(function () { });\n        this.inTick = false;\n        return [activeAnimations, inactiveAnimations];\n    };\n    return AnimationTimeline;\n}());\nexport { AnimationTimeline };\n//# sourceMappingURL=AnimationTimeline.js.map","import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\nexport * from './dom';\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n//# sourceMappingURL=index.js.map"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__read","o","n","m","Symbol","iterator","r","e","i","ar","next","done","push","value","error","__spreadArray","to","from","pack","arguments","length","l","slice","concat","AnimationEvent","_super","manager","target","currentTime","timelineTime","_this","this","type","bubbles","currentTarget","defaultPrevented","eventPhase","AT_TARGET","timeStamp","Date","now","TypeError","__","constructor","create","__extends","FederatedEvent","sequenceNumber","Animation","effect","timeline","_a","currentTimePending","_idle","_paused","_finishedFlag","_currentTime","_playbackRate","_inTimeline","animation","id","_inEffect","update","_totalDuration","Number","getComputedTiming","endTime","_holdTime","oldPlayState","updatePromises","defineProperty","get","_startTime","playbackRate","enumerable","configurable","_isFinished","readyPromise","animationsWithPromises","indexOf","Promise","resolve","reject","resolveReadyPromise","rejectReadyPromise","Error","pending","finishedPromise","resolveFinishedPromise","rejectFinishedPromise","playState","set","newTime","isNaN","restart","tickCurrentTime","applyDirtiedAnimation","oldCurrentTime","startTime","ensureAlive","newPlayState","undefined","play","rewind","animations","pause","finish","cancel","oncancel","event_1","setTimeout","reverse","updatePlaybackRate","targetAnimations","getAnimations","markTarget","unmarkTarget","index","splice","tick","isAnimationFrame","fireEvents","Infinity","persist","ERROR_MSG_METHOD_NOT_IMPLEMENTED","addEventListener","listener","options","removeEventListener","dispatchEvent","event","commitStyles","_b","ignoreLimit","baseTime","onfinish","event_2","onframe","event_3","kSampleStepSize","float32ArraySupported","Float32Array","A","aA1","aA2","B","C","calcBezier","aT","getSlope","bezier","mX1","mY1","mX2","mY2","t","sampleValues","getTForX","aX","intervalStart","currentSample","kSplineTableSize","guessForT","initialSlope","aA","aB","currentX","currentT","Math","abs","binarySubdivide","aGuessT","currentSlope","newtonRaphsonIterate","isNil$1","toString","isType$1","clamp$1","a","min","max","isNumber$1","isType","Quad","pow","Cubic","Quart","Quint","Expo","Sine","cos","PI","Circ","sqrt","Back","Bounce","pow2","Elastic","params","_c","period","clamp","sin","asin","Spring","duration","mass","stiffness","_d","damping","_e","velocity","w0","zeta","wd","progress","exp","Steps","steps","ceil","floor","Bezier","easein","EaseOut","ease","EaseInOut","EaseOutIn","EasingFunctions","linear","in","out","spring","getEasingFunction","str","replace","letter","toLowerCase","charAt","substring","trim","complexEasingSyntax","x","Start","Middle","End","step","count","pos","stepSize","numberString","cubicBezierRe","RegExp","step1Re","step2Re","parseEasingFunction","normalizedEasing","cubicData","exec","apply","map","step1Data","step2Data","start","middle","end","calculateActiveDuration","timing","iterations","repeatedDuration","PhaseNone","PhaseBefore","PhaseAfter","PhaseActive","calculateIterationProgress","activeDuration","localTime","phase","delay","endDelay","calculatePhase","activeTime","fillMode","calculateActiveTime","fill","overallProgress","iterationDuration","iterationStart","calculateOverallProgress","simpleIterationProgress","calculateSimpleIterationProgress","currentIteration","calculateCurrentIteration","directedProgress","playbackDirection","currentDirection","calculateDirectedProgress","direction","easingFunction","convertEffectInput","keyframes","propertySpecificKeyframeGroups","member","isNotReservedWord","propertySpecificKeyframe","offset","computedOffset","easing","makePropertySpecificKeyframeGroups","interpolations","groupName","startIndex","endIndex","startOffset","endOffset","applyFrom","applyTo","property","interpolation","propertyInterpolation","sort","leftInterpolation","rightInterpolation","makeInterpolations","fraction","filter","forEach","localDuration","scaledLocalTime","setAttribute","InterpolationFactory","convertToString","f","interpolated","interpolate","runtime","enableCSSParsing","isNumber","left","right","metadata","propertyMetadataCache","syntax","int","propertyHandler","styleValueRegistry","getPropertySyntax","usedLeft","usedRight","computedLeft","parseProperty","computedRight","computeProperty","parser","parserWithCSSDisabled","interpolationArgs","mixer","interp_1","bool","isArray","fromLength","toLength","length_1","AnimationEffectTiming","_easing","normalizeKeyframes","effectInput","normalizedEffectInput","values","numKeyframes","keyframe","composite","convertToArrayForm","originalKeyframe","memberValue","isFinite","everyFrameHasOffset","previousOffset","isNil","previousIndex","j","spaceKeyframes","fills","split","directions","makeTiming","timingInput","forGroup","keys","normalizeTimingInput","numericTimingToObject","KeyframeEffect","iterationComposite","normalizedKeyframes","Proxy","globalThis","computedTiming","prop","applyInterpolations","timeFraction","getKeyframes","setKeyframes","getTiming","updateTiming","name","compareAnimations","leftAnimation","rightAnimation","AnimationTimeline","document","ticking","timelineTicking","hasRestartedThisFrame","inTick","pendingEffects","rafId","rafCallbacks","webAnimationsNextTick","discardAnimations","requestAnimationFrame","processRafCallbacks","processing","entry","applyPendingEffects","isTicking","restartWebAnimationsNextTick","destroy","defaultView","cancelAnimationFrame","frameId","updateAnimationsPromises","rAF","updatingAnimations","newPendingClears","newPendingEffects","activeAnimations","inactiveAnimations","_needsTick","alive","EasingFunction","gLite"],"mappings":"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","x_google_ignoreList":[0,4,5,6,7]}